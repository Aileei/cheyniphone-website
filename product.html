<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Details - Cheyn iPhones and Gadgets</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }

        /* Cart Overlay Styles */
        .cart-overlay {
            display: none;
            position: fixed;
            top: 0;
            right: 0;
            width: 400px;
            height: 100vh;
            background: white;
            box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            z-index: 1000;
            padding: 20px;
            overflow-y: auto;
        }

        .cart-overlay.active {
            display: block;
        }

        .cart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #ff69b4;
        }

        .cart-title {
            font-size: 24px;
            color: #ff69b4;
        }

        .close-cart {
            background: none;
            border: none;
            font-size: 24px;
            color: #ff69b4;
            cursor: pointer;
        }

        .cart-items {
            margin-bottom: 20px;
        }

        .cart-item {
            display: flex;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }

        .cart-item-image {
            width: 60px;
            height: 60px;
            object-fit: cover;
            margin-right: 15px;
        }

        .cart-item-details {
            flex-grow: 1;
        }

        .cart-item-name {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .cart-item-price {
            color: #ff69b4;
        }

        .cart-item-remove {
            background: none;
            border: none;
            color: #ff1493;
            cursor: pointer;
            padding: 5px;
        }

        .cart-total {
            font-size: 20px;
            font-weight: bold;
            text-align: right;
            margin-top: 20px;
            padding-top: 10px;
            border-top: 2px solid #ff69b4;
        }

        .cart-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .cart-button {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .clear-cart {
            background-color: #ff69b4;
            color: white;
        }

        .checkout-cart {
            background-color: #87CEFA;
            color: white;
        }

        .cart-button:hover {
            opacity: 0.9;
        }

        .empty-cart-message {
            text-align: center;
            color: #666;
            margin: 20px 0;
        }

        /* Overlay background */
        .overlay-background {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 999;
        }

        .overlay-background.active {
            display: block;
        }

        /* Payment Modal Styles */
        .payment-modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            max-width: 500px;
            background: white;
            border-radius: 10px;
            padding: 30px;
            z-index: 1001;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .payment-modal.active {
            display: block;
        }

        /* Checkout Modal Styles */
        .checkout-modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            max-width: 600px;
            background: white;
            border-radius: 10px;
            padding: 20px 30px;
            z-index: 1002;
            box-shadow: 0 8px 24px rgba(0,0,0,0.2);
        }

        .checkout-modal.active {
            display: block;
        }

        .checkout-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .checkout-title {
            font-size: 22px;
            color: #ff69b4;
        }

        .close-checkout {
            background: none;
            border: none;
            font-size: 22px;
            color: #ff69b4;
            cursor: pointer;
        }

        .checkout-form .form-row { display: block; }
        .checkout-summary { margin-top: 15px; border-top: 1px solid #eee; padding-top: 12px; }

        .payment-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #ff69b4;
        }

        .payment-title {
            font-size: 24px;
            color: #ff69b4;
        }

        .close-payment {
            background: none;
            border: none;
            font-size: 24px;
            color: #ff69b4;
            cursor: pointer;
        }

        .payment-methods {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 20px;
        }

        .payment-method {
            display: flex;
            align-items: center;
            padding: 15px;
            border: 2px solid #eee;
            border-radius: 8px;
            cursor: pointer;
            transition: border-color 0.3s ease;
        }

        .payment-method:hover {
            border-color: #ff69b4;
        }

        .payment-method.selected {
            border-color: #ff69b4;
            background-color: #fff5f8;
        }

        .payment-method img {
            width: 40px;
            height: 40px;
            margin-right: 15px;
            object-fit: contain;
        }

        .payment-method-details {
            flex-grow: 1;
        }

        .payment-method-name {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .payment-method-description {
            font-size: 14px;
            color: #666;
        }

        .payment-form {
            display: none;
            margin-top: 20px;
        }

        .payment-form.active {
            display: block;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #333;
            font-weight: bold;
        }

        .form-group input {
            width: 100%;
            padding: 10px;
            border: 2px solid #eee;
            border-radius: 5px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus {
            border-color: #ff69b4;
            outline: none;
        }

        .form-row {
            display: flex;
            gap: 15px;
        }

        .form-row .form-group {
            flex: 1;
        }

        .pay-button {
            width: 100%;
            padding: 15px;
            background-color: #ff69b4;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .pay-button:hover {
            background-color: #ff1493;
        }

        .payment-total {
            font-size: 20px;
            font-weight: bold;
            text-align: right;
            margin: 20px 0;
            color: #ff69b4;
        }

        body {
            background-color: #f5f5f5;
        }

        .nav {
            display: flex;
            justify-content: left;
            align-items: center;
            margin-bottom: 30px;
        }

        .nav a {
            color: #ff69b4;
            text-decoration: none;
            margin: 0 20px;
            font-size: 18px;
            font-weight: bold;
            transition: color 0.3s ease;
        }

        .nav .cart-icon {
            font-size: 20px;
            position: relative;
        }

        .nav a:hover {
            color: #ff1493;
        }

        .logo-container {
            text-align: center;
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto;
        }

        .logo-text {
            font-size: 48px;
            font-weight: bold;
            color: #ff69b4;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .logo-apple {
            width: 40px;
            height: 40px;
            margin-right: 10px;
            fill: #ff69b4;
        }

        .subtitle {
            font-size: 24px;
            color: #ff69b4;
            margin-top: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .header {
            background-color: #fff;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px 0;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .product-details {
            background: white;
            border-radius: 10px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .product-title {
            font-size: 32px;
            color: #ff69b4;
            margin-bottom: 20px;
        }

        .product-image {
            max-width: 300px;
            margin: 20px auto;
            display: block;
        }

        .product-price {
            font-size: 24px;
            color: #333;
            margin: 20px 0;
            font-weight: bold;
        }

        .specs-title {
            font-size: 24px;
            color: #ff69b4;
            margin: 30px 0 15px;
        }

        .specs-list {
            list-style: none;
        }

        .specs-list li {
            margin: 10px 0;
            padding: 10px;
            background: #f8f8f8;
            border-radius: 5px;
            font-size: 16px;
            color: #333;
        }

        .back-button {
            display: inline-block;
            padding: 12px 25px;
            background-color: #ff69b4;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            margin-top: 20px;
            transition: background-color 0.3s ease;
        }

        .back-button:hover {
            background-color: #ff1493;
        }

        .button-group {
            display: flex;
            gap: 20px;
            margin-top: 20px;
            justify-content: center;
        }

        .checkout-button {
            padding: 12px 25px;
            background-color: #87CEFA;
            color: white;
            border: none;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s ease;
        }

        .checkout-button:hover {
            background-color: #00BFFF;
        }

        #error-message {
            text-align: center;
            color: #ff1493;
            font-size: 20px;
            margin: 50px 0;
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="container">
            <nav class="nav">
                <a href="index.html">HOME</a>
                <a href="services.html">SERVICES</a>
                <a href="location.html">LOCATION</a>
                <a href="contact.html">CONTACT</a>
                <a href="#" class="cart-icon"><i class="fas fa-shopping-cart"></i></a>
            </nav>
            <div class="logo-container">
                <div class="logo">
                    <svg class="logo-apple" viewBox="0 0 170 170">
                        <path d="M150.37 130.25c-2.45 5.66-5.35 10.87-8.71 15.66-4.58 6.53-8.33 11.05-11.22 13.56-4.48 4.12-9.28 6.23-14.42 6.35-3.69 0-8.14-1.05-13.32-3.18-5.197-2.12-9.973-3.17-14.34-3.17-4.58 0-9.492 1.05-14.746 3.17-5.262 2.13-9.501 3.24-12.742 3.35-4.929 0.21-9.842-1.96-14.746-6.52-3.13-2.73-7.045-7.41-11.735-14.04-5.032-7.08-9.169-15.29-12.41-24.65-3.471-10.11-5.211-19.9-5.211-29.378 0-10.857 2.346-20.221 7.045-28.068 3.693-6.303 8.606-11.275 14.755-14.925s12.793-5.51 19.948-5.629c3.915 0 9.049 1.211 15.429 3.591 6.362 2.388 10.447 3.599 12.238 3.599 1.339 0 5.877-1.416 13.57-4.239 7.275-2.618 13.415-3.702 18.445-3.275 13.63 1.1 23.87 6.473 30.68 16.153-12.19 7.386-18.22 17.731-18.1 31.002 0.11 10.337 3.86 18.939 11.23 25.769 3.34 3.17 7.07 5.62 11.22 7.36-0.9 2.61-1.85 5.11-2.86 7.51zM119.11 7.24c0 8.102-2.96 15.667-8.86 22.669-7.12 8.324-15.732 13.134-25.071 12.375-0.119-0.972-0.188-1.995-0.188-3.07 0-7.778 3.386-16.102 9.399-22.908 3.002-3.446 6.82-6.311 11.45-8.597 4.62-2.252 8.99-3.497 13.1-3.71 0.12 1.083 0.17 2.17 0.17 3.24z"/>
                    </svg>
                    <span class="logo-text">Cheyn</span>
                </div>
                <div class="subtitle">iPhones and Gadgets</div>
            </div>
        </div>
    </header>

    <div class="container">
        <div class="product-details" id="product-container">
            <!-- Content will be populated by JavaScript -->
        </div>
    </div>

    <!-- Cart Overlay -->
    <div class="overlay-background" id="overlayBackground"></div>
    <div class="cart-overlay" id="cartOverlay">
        <div class="cart-header">
            <h2 class="cart-title">Your Cart</h2>
            <button class="close-cart" onclick="toggleCart()">&times;</button>
        </div>
        <div id="cartItems" class="cart-items">
            <!-- Cart items will be populated here -->
        </div>
        <div id="cartTotal" class="cart-total">
            Total: ₱0
        </div>
        <div class="cart-buttons">
            <button class="cart-button clear-cart" onclick="clearCart()">Clear Cart</button>
            <button class="cart-button checkout-cart" onclick="showCheckoutModal()">Checkout</button>
        </div>
    </div>
    <!-- Checkout Modal -->
    <div class="checkout-modal" id="checkoutModal">
        <div class="checkout-header">
            <h3 class="checkout-title">Checkout</h3>
            <button class="close-checkout" onclick="closeCheckoutModal()">&times;</button>
        </div>
        <form id="checkoutForm" class="checkout-form">
            <div class="form-group">
                <label for="fullName">Full Name</label>
                <input type="text" id="fullName" placeholder="Juan Dela Cruz">
            </div>
            <div class="form-group">
                <label for="email">Email</label>
                <input type="email" id="email" placeholder="you@example.com">
            </div>
            <div class="form-group">
                <label for="phone">Phone</label>
                <input type="text" id="phone" placeholder="09XXXXXXXXX">
            </div>
            <div class="form-group">
                <label for="address">Shipping Address</label>
                <input type="text" id="address" placeholder="Street, Barangay, City">
            </div>
            <div class="form-group">
                <label for="notes">Order Notes (optional)</label>
                <input type="text" id="notes" placeholder="Leave at the guard, etc.">
            </div>
            <div class="checkout-summary" id="checkoutSummary">
                <!-- summary populated by JS -->
            </div>
            <div class="form-row" style="margin-top:12px;">
                <button type="button" class="pay-button" onclick="processCheckout()">Pay / Continue</button>
            </div>
        </form>
    </div>

    <!-- Payment Modal -->
    <div class="payment-modal" id="paymentModal">
        <div class="payment-header">
            <h2 class="payment-title">Choose Payment Method</h2>
            <button class="close-payment" onclick="closePaymentModal()">&times;</button>
        </div>
        <div class="payment-total" id="paymentTotal">
            Total to Pay: ₱0
        </div>
        <div class="payment-methods">
            <div class="payment-method" onclick="selectPaymentMethod('credit-card', this)">
                <img src="https://cdn-icons-png.flaticon.com/512/890/890962.png" alt="Credit Card" width="40" height="40" onerror="this.onerror=null;this.src='https://cdn-icons-png.flaticon.com/512/2913/2913467.png'">
                <div class="payment-method-details">
                    <div class="payment-method-name">Credit/Debit Card</div>
                    <div class="payment-method-description">Pay with Visa, Mastercard, or other cards</div>
                </div>
            </div>
            <div class="payment-method" onclick="selectPaymentMethod('gcash', this)">
                <img src="https://upload.wikimedia.org/wikipedia/commons/9/97/GCash_logo.svg" alt="GCash" width="40" height="40" onerror="this.onerror=null;this.src='https://cdn-icons-png.flaticon.com/512/2913/2913467.png'">
                <div class="payment-method-details">
                    <div class="payment-method-name">GCash</div>
                    <div class="payment-method-description">Pay using your GCash wallet</div>
                </div>
            </div>
            <div class="payment-method" onclick="selectPaymentMethod('maya', this)">
                <img src="https://cdn-icons-png.flaticon.com/512/633/633600.png" alt="Maya" width="40" height="40" onerror="this.onerror=null;this.src='https://cdn-icons-png.flaticon.com/512/2913/2913467.png'">
                <div class="payment-method-details">
                    <div class="payment-method-name">Maya</div>
                    <div class="payment-method-description">Pay using your Maya wallet</div>
                </div>
            </div>
            <div class="payment-method" onclick="selectPaymentMethod('skyro', this)">
                <img src="https://skyro.ph/wp-content/uploads/2023/05/skyro_logo_black.svg" alt="Skyro" width="40" height="40" onerror="this.onerror=null;this.src='https://cdn-icons-png.flaticon.com/512/2913/2913467.png'">
                <div class="payment-method-details">
                    <div class="payment-method-name">Skyro</div>
                    <div class="payment-method-description">Pay through Skyro checkout</div>
                </div>
            </div>
        </div>

        <!-- Credit Card Form -->
        <form id="creditCardForm" class="payment-form">
            <div class="form-group">
                <label for="cardNumber">Card Number</label>
                <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456" maxlength="19">
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label for="expiryDate">Expiry Date</label>
                    <input type="text" id="expiryDate" placeholder="MM/YY" maxlength="5">
                </div>
                <div class="form-group">
                    <label for="cvv">CVV</label>
                    <input type="text" id="cvv" placeholder="123" maxlength="3">
                </div>
            </div>
            <div class="form-group">
                <label for="cardName">Name on Card</label>
                <input type="text" id="cardName" placeholder="John Doe">
            </div>
            <button type="button" class="pay-button" onclick="processPayment('credit-card')">Pay Now</button>
        </form>

        <!-- GCash Form -->
        <form id="gcashForm" class="payment-form">
            <div class="form-group">
                <label for="gcashNumber">GCash Number</label>
                <input type="text" id="gcashNumber" placeholder="09XX XXX XXXX" maxlength="11">
            </div>
            <button type="button" class="pay-button" onclick="processPayment('gcash')">Pay with GCash</button>
        </form>

        <!-- Maya Form -->
        <form id="mayaForm" class="payment-form">
            <div class="form-group">
                <label for="mayaNumber">Maya Account Number</label>
                <input type="text" id="mayaNumber" placeholder="09XX XXX XXXX" maxlength="11">
            </div>
            <button type="button" class="pay-button" onclick="processPayment('maya')">Pay with Maya</button>
        </form>
        <!-- Skyro Form -->
        <form id="skyroForm" class="payment-form">
            <div class="form-group">
                <p>You will be redirected to Skyro to complete the payment.</p>
            </div>
            <button type="button" class="pay-button" onclick="processPayment('skyro')">Pay with Skyro</button>
        </form>
    </div>

    <script>
        // Cart functionality
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        
        function toggleCart() {
            const cartOverlay = document.getElementById('cartOverlay');
            const overlayBg = document.getElementById('overlayBackground');
            cartOverlay.classList.toggle('active');
            overlayBg.classList.toggle('active');
            updateCartDisplay();
        }

        function addToCart(model, name, price, image) {
            cart.push({ model, name, price, image, quantity: 1 });
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartDisplay();
            toggleCart(); // Show cart after adding item
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartDisplay();
        }

        function clearCart() {
            cart = [];
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartDisplay();
        }

        function showPaymentModal() {
            const modal = document.getElementById('paymentModal');
            const total = cart.reduce((sum, item) => sum + parseFloat(item.price.replace('₱', '').replace(',', '')), 0);
            document.getElementById('paymentTotal').textContent = `Total to Pay: ₱${total.toLocaleString()}`;
            modal.classList.add('active');
            document.getElementById('overlayBackground').style.zIndex = '1000';
        }

        function closePaymentModal() {
            const modal = document.getElementById('paymentModal');
            modal.classList.remove('active');
            document.getElementById('overlayBackground').style.zIndex = '999';
            
            // Reset all payment methods and forms
            document.querySelectorAll('.payment-method').forEach(method => {
                method.classList.remove('selected');
            });
            document.querySelectorAll('.payment-form').forEach(form => {
                form.classList.remove('active');
                form.reset();
            });
        }

        function selectPaymentMethod(method, el) {
            // Remove selected class from all methods
            document.querySelectorAll('.payment-method').forEach(m => m.classList.remove('selected'));

            // Add selected class to clicked method
            if (el) el.classList.add('selected');

            // Hide all forms
            document.querySelectorAll('.payment-form').forEach(form => form.classList.remove('active'));

            // Show selected form if it exists
            const form = document.getElementById(`${method}Form`);
            if (form) {
                form.classList.add('active');
            }
        }

        // Checkout modal handlers
        function showCheckoutModal() {
            const checkout = document.getElementById('checkoutModal');
            const overlay = document.getElementById('overlayBackground');
            // If cart overlay is open, close it first
            const cartOverlay = document.getElementById('cartOverlay');
            if (cartOverlay.classList.contains('active')) toggleCart();

            // Populate summary
            const summary = document.getElementById('checkoutSummary');
            if (!cart || cart.length === 0) {
                summary.innerHTML = '<div class="empty-cart-message">Your cart is empty</div>';
            } else {
                let total = 0;
                const itemsHtml = cart.map(item => {
                    total += parseFloat(item.price.replace('₱', '').replace(',', ''));
                    return `<div style="display:flex;justify-content:space-between;padding:6px 0;border-bottom:1px solid #f0f0f0;"><div>${item.name}</div><div style="color:#ff69b4;font-weight:bold">${item.price}</div></div>`;
                }).join('');
                itemsHtml && (summary.innerHTML = itemsHtml + `<div style="text-align:right;margin-top:8px;font-weight:bold">Total: ₱${total.toLocaleString()}</div>`);
            }

            checkout.classList.add('active');
            overlay.classList.add('active');
            overlay.style.zIndex = '1001';
        }

        function closeCheckoutModal() {
            const checkout = document.getElementById('checkoutModal');
            const overlay = document.getElementById('overlayBackground');
            checkout.classList.remove('active');
            overlay.classList.remove('active');
            overlay.style.zIndex = '999';
        }

        function processCheckout() {
            const name = document.getElementById('fullName').value.trim();
            const email = document.getElementById('email').value.trim();
            const phone = document.getElementById('phone').value.trim();
            const address = document.getElementById('address').value.trim();

            if (!name || !email || !phone || !address) {
                alert('Please fill in all required fields (name, email, phone, address).');
                return;
            }

            // For now, redirect to Skyro to complete payment
            window.open('https://skyro.ph', '_blank');
            clearCart();
            closeCheckoutModal();
            alert('You were redirected to Skyro to complete the payment. Thank you!');
        }

        function processPayment(method) {
            // Special handling for Skyro: redirect to Skyro checkout
            if (method === 'skyro') {
                // Open Skyro in a new tab to let user complete payment there
                window.open('https://skyro.ph', '_blank');
                // Optionally simulate post-payment success
                clearCart();
                closePaymentModal();
                toggleCart();
                alert('You were redirected to Skyro to complete the payment. Thank you!');
                return;
            }

            // For other methods validate form fields
            let isValid = true;
            const form = document.getElementById(`${method}Form`);
            if (!form) {
                alert('Payment form not found for selected method.');
                return;
            }

            const inputs = form.querySelectorAll('input');
            inputs.forEach(input => {
                if (!input.value.trim()) {
                    isValid = false;
                    input.style.borderColor = '#ff0000';
                } else {
                    input.style.borderColor = '#eee';
                }
            });

            if (!isValid) {
                alert('Please fill in all fields');
                return;
            }

            // Simulate payment processing
            const total = cart.reduce((sum, item) => sum + parseFloat(item.price.replace('₱', '').replace(',', '')), 0);
            alert(`Processing ${method} payment for ₱${total.toLocaleString()}...`);
            
            // Clear cart after successful payment
            clearCart();
            closePaymentModal();
            toggleCart();

            // Show success message
            alert('Payment successful! Thank you for your purchase.');
        }

        // Format credit card number with spaces
        document.getElementById('cardNumber').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\s+/g, '').replace(/[^0-9]/gi, '');
            let formattedValue = value.match(/.{1,4}/g)?.join(' ') || value;
            e.target.value = formattedValue;
        });

        // Format expiry date
        document.getElementById('expiryDate').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\s+/g, '').replace(/[^0-9]/gi, '');
            if (value.length > 2) {
                value = value.slice(0, 2) + '/' + value.slice(2);
            }
            e.target.value = value;
        });

        // Format phone numbers
        ['gcashNumber', 'mayaNumber'].forEach(id => {
            document.getElementById(id).addEventListener('input', function(e) {
                let value = e.target.value.replace(/\s+/g, '').replace(/[^0-9]/gi, '');
                e.target.value = value;
            });
        });

        function updateCartDisplay() {
            const cartItems = document.getElementById('cartItems');
            const cartTotal = document.getElementById('cartTotal');
            let total = 0;

            if (cart.length === 0) {
                cartItems.innerHTML = '<div class="empty-cart-message">Your cart is empty</div>';
                cartTotal.innerHTML = 'Total: ₱0';
                return;
            }

            cartItems.innerHTML = cart.map((item, index) => {
                total += parseFloat(item.price.replace('₱', '').replace(',', ''));
                return `
                    <div class="cart-item">
                        <img src="${item.image}" alt="${item.name}" class="cart-item-image">
                        <div class="cart-item-details">
                            <div class="cart-item-name">${item.name}</div>
                            <div class="cart-item-price">${item.price}</div>
                        </div>
                        <button class="cart-item-remove" onclick="removeFromCart(${index})">×</button>
                    </div>
                `;
            }).join('');

            cartTotal.innerHTML = `Total: ₱${total.toLocaleString()}`;
        }

        // Add click event listener to cart icon and auto-open cart when URL hash present
        document.addEventListener('DOMContentLoaded', function() {
            const cartIcon = document.querySelector('.cart-icon');
            if (cartIcon) {
                cartIcon.addEventListener('click', function(e) {
                    // If the icon is an in-page control (product page), toggle cart; otherwise the link navigates
                    if (location.pathname.endsWith('product.html')) {
                        e.preventDefault();
                        toggleCart();
                    }
                });
            }

            // If the URL has #cart or ?showCart=1 open the cart overlay automatically
            const shouldOpenCart = (location.hash === '#cart') || (new URLSearchParams(location.search).get('showCart') === '1');
            if (shouldOpenCart) {
                const cartOverlay = document.getElementById('cartOverlay');
                const overlayBg = document.getElementById('overlayBackground');
                if (cartOverlay && overlayBg) {
                    cartOverlay.classList.add('active');
                    overlayBg.classList.add('active');
                    updateCartDisplay();
                }
            }

            // Close overlays/modals when clicking outside
            document.getElementById('overlayBackground').addEventListener('click', function() {
                const cartOverlay = document.getElementById('cartOverlay');
                const paymentModal = document.getElementById('paymentModal');
                const checkoutModal = document.getElementById('checkoutModal');
                if (checkoutModal && checkoutModal.classList.contains('active')) {
                    closeCheckoutModal();
                    return;
                }
                if (paymentModal && paymentModal.classList.contains('active')) {
                    closePaymentModal();
                    return;
                }
                if (cartOverlay && cartOverlay.classList.contains('active')) {
                    toggleCart();
                }
            });
        });

        // Phone specifications database
        const phoneSpecs = {
            'iphone-15-pro-max': {
                name: 'iPhone 15 Pro Max',
                price: '₱89,990',
                image: 'https://store.storeimages.cdn-apple.com/4982/as-images.apple.com/is/iphone-15-pro-max-natural-titanium-select?wid=800&hei=800&fmt=jpeg&qlt=90',
                specs: [
                    'Display: 6.7-inch Super Retina XDR OLED',
                    'Processor: A17 Pro chip',
                    'Storage: 256GB/512GB/1TB',
                    'Camera: 48MP Main + 12MP Ultra Wide + 12MP Telephoto',
                    'Battery: Up to 29 hours video playback',
                    'Features: Dynamic Island, Always-On display, ProMotion',
                    'Colors: Natural Titanium, Blue Titanium, White Titanium, Black Titanium'
                ]
            },
            'iphone-15-pro': {
                name: 'iPhone 15 Pro',
                price: '₱79,990',
                image: 'https://store.storeimages.cdn-apple.com/4982/as-images.apple.com/is/iphone-15-pro-black-select?wid=800&hei=800&fmt=jpeg&qlt=90',
                specs: [
                    'Display: 6.1-inch Super Retina XDR OLED',
                    'Processor: A17 Pro chip',
                    'Storage: 128GB/256GB/512GB/1TB',
                    'Camera: 48MP Main + 12MP Ultra Wide + 12MP Telephoto',
                    'Battery: Up to 23 hours video playback',
                    'Features: Dynamic Island, Always-On display, ProMotion',
                    'Colors: Natural Titanium, Blue Titanium, White Titanium, Black Titanium'
                ]
            },
            'iphone-15-plus': {
                name: 'iPhone 15 Plus',
                price: '₱69,990',
                image: 'https://store.storeimages.cdn-apple.com/4982/as-images.apple.com/is/iphone-15-plus-yellow-select?wid=800&hei=800&fmt=jpeg&qlt=90',
                specs: [
                    'Display: 6.7-inch Super Retina XDR OLED',
                    'Processor: A16 Bionic chip',
                    'Storage: 128GB/256GB/512GB',
                    'Camera: 48MP Main + 12MP Ultra Wide',
                    'Battery: Up to 26 hours video playback',
                    'Features: Dynamic Island, USB-C',
                    'Colors: Pink, Yellow, Green, Blue, Black'
                ]
            },
            'iphone-15': {
                name: 'iPhone 15',
                price: '₱59,990',
                image: 'https://store.storeimages.cdn-apple.com/4982/as-images.apple.com/is/iphone-15-pink-select-202309?wid=800&hei=800&fmt=jpeg&qlt=90',
                specs: [
                    'Display: 6.1-inch Super Retina XDR OLED',
                    'Processor: A16 Bionic chip',
                    'Storage: 128GB/256GB/512GB',
                    'Camera: 48MP Main + 12MP Ultra Wide',
                    'Battery: Up to 20 hours video playback',
                    'Features: Dynamic Island, USB-C',
                    'Colors: Pink, Yellow, Green, Blue, Black'
                ]
            },
            'iphone-14-pro-max': {
                name: 'iPhone 14 Pro Max',
                price: '₱77,990',
                image: 'https://store.storeimages.cdn-apple.com/4982/as-images.apple.com/is/iphone-14-pro-max-gold-select?wid=800&hei=800&fmt=jpeg&qlt=90',
                specs: [
                    'Display: 6.7-inch Super Retina XDR OLED',
                    'Processor: A16 Bionic chip',
                    'Storage: 128GB/256GB/512GB/1TB',
                    'Camera: 48MP Main + 12MP Ultra Wide + 12MP Telephoto',
                    'Battery: Up to 29 hours video playback',
                    'Features: Dynamic Island, Always-On display',
                    'Colors: Space Black, Silver, Gold, Deep Purple'
                ]
            },
            'iphone-14-pro': {
                name: 'iPhone 14 Pro',
                price: '₱70,990',
                image: 'https://store.storeimages.cdn-apple.com/4982/as-images.apple.com/is/iphone-14-pro-silver-select?wid=800&hei=800&fmt=jpeg&qlt=90',
                specs: [
                    'Display: 6.1-inch Super Retina XDR OLED',
                    'Processor: A16 Bionic chip',
                    'Storage: 128GB/256GB/512GB/1TB',
                    'Camera: 48MP Main + 12MP Ultra Wide + 12MP Telephoto',
                    'Battery: Up to 23 hours video playback',
                    'Features: Dynamic Island, Always-On display',
                    'Colors: Space Black, Silver, Gold, Deep Purple'
                ]
            },
            'iphone-14-plus': {
                name: 'iPhone 14 Plus',
                price: '₱63,990',
                image: 'https://store.storeimages.cdn-apple.com/4982/as-images.apple.com/is/iphone-14-finish-select-202209-6-7inch-blue?wid=800&hei=800&fmt=jpeg&qlt=90',
                specs: [
                    'Display: 6.7-inch Super Retina XDR OLED',
                    'Processor: A15 Bionic chip',
                    'Storage: 128GB/256GB/512GB',
                    'Camera: 12MP Main + 12MP Ultra Wide',
                    'Battery: Up to 26 hours video playback',
                    'Features: Emergency SOS, Crash Detection',
                    'Colors: Midnight, Starlight, Blue, Purple, Red'
                ]
            },
            'iphone-14': {
                name: 'iPhone 14',
                price: '₱56,990',
                image: 'https://store.storeimages.cdn-apple.com/4982/as-images.apple.com/is/iphone-14-finish-select-202209-6-1inch-blue?wid=800&hei=800&fmt=jpeg&qlt=90',
                specs: [
                    'Display: 6.1-inch Super Retina XDR OLED',
                    'Processor: A15 Bionic chip',
                    'Storage: 128GB/256GB/512GB',
                    'Camera: 12MP Main + 12MP Ultra Wide',
                    'Battery: Up to 20 hours video playback',
                    'Features: Emergency SOS, Crash Detection',
                    'Colors: Midnight, Starlight, Blue, Purple, Red'
                ]
            },
            'iphone-13': {
                name: 'iPhone 13',
                price: '₱48,990',
                image: 'https://store.storeimages.cdn-apple.com/4982/as-images.apple.com/is/iphone-13-finish-select-202207-6-1inch-pink?wid=800&hei=800&fmt=jpeg&qlt=90',
                specs: [
                    'Display: 6.1-inch Super Retina XDR OLED',
                    'Processor: A15 Bionic chip',
                    'Storage: 128GB/256GB/512GB',
                    'Camera: 12MP Main + 12MP Ultra Wide',
                    'Battery: Up to 19 hours video playback',
                    'Features: Face ID, MagSafe charging',
                    'Colors: Pink, Blue, Midnight, Starlight, Red'
                ]
            },
            'iphone-12': {
                name: 'iPhone 12',
                price: '₱41,990',
                image: 'https://store.storeimages.cdn-apple.com/4982/as-images.apple.com/is/iphone-12-purple-select-2021?wid=800&hei=800&fmt=jpeg&qlt=90',
                specs: [
                    'Display: 6.1-inch Super Retina XDR OLED',
                    'Processor: A14 Bionic chip',
                    'Storage: 64GB/128GB/256GB',
                    'Camera: 12MP Main + 12MP Ultra Wide',
                    'Battery: Up to 17 hours video playback',
                    'Features: Face ID, MagSafe charging',
                    'Colors: Black, White, Red, Green, Blue, Purple'
                ]
            }
        };

        function displayProduct() {
            const urlParams = new URLSearchParams(window.location.search);
            const model = urlParams.get('model');
            const container = document.getElementById('product-container');
            
            if (model && phoneSpecs[model]) {
                const phone = phoneSpecs[model];
                const content = `
                    <h1 class="product-title">${phone.name}</h1>
                    <img src="${phone.image}" alt="${phone.name}" class="product-image">
                    <div class="product-price">${phone.price}</div>
                    <h2 class="specs-title">Specifications</h2>
                    <ul class="specs-list">
                        ${phone.specs.map(spec => `<li>${spec}</li>`).join('')}
                    </ul>
                    <div class="button-group">
                        <a href="index.html" class="back-button">Back to Products</a>
                        <button class="checkout-button" onclick="addToCart('${model}', '${phone.name}', '${phone.price}', '${phone.image}')">Add to Cart</button>
                    </div>
                `;
                container.innerHTML = content;
            } else {
                container.innerHTML = '<div id="error-message">Product not found</div><a href="index.html" class="back-button">Back to Products</a>';
            }
        }

        // Call the function when the page loads
        window.onload = displayProduct;
    </script>
</body>
</html>